<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Routine</title>

  <!-- PWA Meta -->
  <meta name="theme-color" content="#c8a96e" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Routine" />

  <!-- Manifest + Icons -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="data:image/png;base64,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" />
  <link rel="apple-touch-icon" href="data:image/png;base64,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" />


  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- TOP BAR -->
  <header class="topbar">
    <span class="app-title">Routine</span>
  </header>

  <!-- NAV TABS -->
  <nav class="tab-nav">
    <button class="tab active" data-tab="dashboard">Dashboard</button>
    <button class="tab" data-tab="daily">Daily</button>
    <button class="tab" data-tab="fixed">Fixed</button>
    <button class="tab" data-tab="history">History</button>
  </nav>

  <!-- TAB: DASHBOARD -->
  <div id="tab-dashboard" class="tab-content active">
    <div class="section-header">
      <span class="date-label" id="today-label"></span>
    </div>

    <div class="progress-card">
      <div class="progress-ring-wrap">
        <svg class="progress-ring" width="140" height="140" viewBox="0 0 140 140">
          <circle class="ring-bg" cx="70" cy="70" r="58"/>
          <circle class="ring-fill" id="ring-fill" cx="70" cy="70" r="58"/>
        </svg>
        <div class="ring-label">
          <span id="pct-number">0</span>
          <span class="pct-sign">%</span>
        </div>
      </div>
      <div class="progress-stats">
        <div class="stat">
          <span id="stat-done">0</span>
          <label>Done</label>
        </div>
        <div class="stat-divider"></div>
        <div class="stat">
          <span id="stat-total">0</span>
          <label>Total</label>
        </div>
      </div>
    </div>

    <div class="quote-card">
      <div class="quote-tag" id="quote-tag">&#8212;</div>
      <p class="quote-text" id="quote-text">Add tasks to start tracking your day.</p>
    </div>

    <button class="btn-small" id="btn-end-day">End Day &amp; Save to History</button>
  </div>

  <!-- TAB: DAILY -->
  <div id="tab-daily" class="tab-content">
    <div class="section-header">
      <h2>Today's Tasks</h2>
      <button class="add-btn" id="btn-add-daily">+ Add</button>
    </div>
    <ul class="task-list" id="daily-list"></ul>
    <p class="empty-msg" id="daily-empty">No tasks yet.</p>
    <button class="btn-small secondary" id="btn-load-fixed">Load Fixed Routine</button>
  </div>

  <!-- TAB: FIXED -->
  <div id="tab-fixed" class="tab-content">
    <div class="section-header">
      <h2>Fixed Routine</h2>
      <button class="add-btn" id="btn-add-fixed">+ Add</button>
    </div>
    <p class="tab-note">These tasks auto-fill your daily routine.</p>
    <ul class="task-list" id="fixed-list"></ul>
    <p class="empty-msg" id="fixed-empty">No fixed tasks yet.</p>
  </div>

  <!-- TAB: HISTORY -->
  <div id="tab-history" class="tab-content">
    <div class="section-header">
      <h2>History</h2>
    </div>
    <ul class="history-list" id="history-list"></ul>
    <p class="empty-msg" id="history-empty">No history yet. End a day to record it.</p>
  </div>

  <!-- MODAL -->
  <div id="modal-overlay" class="modal-overlay hidden">
    <div class="modal">
      <h3 id="modal-title">Add Task</h3>

      <label class="field-label">Task Name</label>
      <input type="text" id="modal-input" class="modal-input" placeholder="Task name&hellip;" maxlength="80" />

      <div class="reminder-section">
        <div class="reminder-toggle-row">
          <label class="field-label" for="reminder-toggle">Set Reminder</label>
          <label class="toggle-switch">
            <input type="checkbox" id="reminder-toggle" />
            <span class="toggle-track"></span>
          </label>
        </div>

        <div id="reminder-fields" class="reminder-fields hidden">
          <label class="field-label">Time</label>
          <input type="time" id="reminder-time" class="modal-input" />

          <label class="field-label">Ringtone</label>
          <div class="ringtone-grid" id="ringtone-grid">
            <button class="ringtone-btn active" data-tone="gentle" type="button">
              <span class="tone-icon">&#128276;</span><span>Gentle</span>
            </button>
            <button class="ringtone-btn" data-tone="classic" type="button">
              <span class="tone-icon">&#127925;</span><span>Classic</span>
            </button>
            <button class="ringtone-btn" data-tone="digital" type="button">
              <span class="tone-icon">&#128241;</span><span>Digital</span>
            </button>
            <button class="ringtone-btn" data-tone="chime" type="button">
              <span class="tone-icon">&#127926;</span><span>Chime</span>
            </button>
            <button class="ringtone-btn" data-tone="urgent" type="button">
              <span class="tone-icon">&#9889;</span><span>Urgent</span>
            </button>
          </div>
          <button class="preview-btn" id="btn-preview-tone" type="button">&#9654; Preview</button>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn-secondary" id="modal-cancel">Cancel</button>
        <button class="btn-primary" id="modal-save">Save</button>
      </div>
    </div>
  </div>

  <!-- App Scripts -->
  <script src="quotes.js"></script>
  <script src="storage.js"></script>
  <script src="ringtones.js"></script>
  <script src="app.js"></script>

  <!-- Service Worker Registration â€” MUST be last -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('sw.js')
          .then(function (reg) {
            console.log('SW registered, scope:', reg.scope);
          })
          .catch(function (err) {
            console.error('SW registration failed:', err);
          });
      });
    }
  </script>

</body>
</html>
